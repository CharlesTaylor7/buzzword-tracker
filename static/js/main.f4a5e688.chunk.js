(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{221:function(e,t,r){e.exports=r(425)},226:function(e,t,r){},227:function(e,t,r){},405:function(e,t,r){},406:function(e,t,r){},407:function(e,t,r){},425:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),u=r(80),c=r.n(u),o=(r(226),r(227),r(190)),i=r(18),l=r(189),s=r(433),p=r(92),f=r(191),d=r(440),y=r(426),h=r(188),b=r(82),v=r.n(b),m=r(83),g=(r(176),r(81),r(91));function j(e,t){j=function(e,t){return new u(e,t)};var r=Object(g.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function u(e,t){var n=r.call(this,e);return a.set(n,t),n}function c(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(m.a)(u,r),u.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=c(t,this)),t},u.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var u=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(c(e,u)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},j.apply(this,arguments)}var w=/^([0-9]+|s|a|aa|at|an|the|of|on|and|to|in|for)$/,O=/[\-\[\]\s,.\u2013_'\u2019();:\/"\u201d]/,k=["title","description"],E=function(e){return Number(e.match(j(/^q(\d+)$/,{index:1})).groups.index)},q=function(e){return l.a(s.a(function(t){return e[t]?e[t].split(O):[]}),p.a(v.a),f.a(function(e){return!d.a(e)&&d.a(y.a(w,e))}),h.a)(k)},Q=r(60),x=r(430),S=r(439),R=r(435),$=r(427),C=r(436),M=r(437),N=r(428),_=r(429),I=r(438),T=function(e){var t=e.queries,r=e.yearRange,u=e.recordSet$,c=e.colorMap,h=Object(i.a)(r,2),b=h[0],m=h[1],g=function(e){var t=Object(n.useRef)({records:{},stemsToRecords:{},yearsToRecords:{}}),r=Object(n.useState)(0),a=Object(i.a)(r,2),u=a[0],c=a[1];return Object(n.useEffect)(function(){var r=e.subscribe(function(e){var r=t.current,n=r.records,a=r.stemsToRecords,u=r.yearsToRecords,o=!0,i=!1,l=void 0;try{for(var s,p=e[Symbol.iterator]();!(o=(s=p.next()).done);o=!0){var f=s.value;n[f.id]=f;var d=!0,y=!1,h=void 0;try{for(var b,v=q(f)[Symbol.iterator]();!(d=(b=v.next()).done);d=!0){var m=b.value;void 0===a[m]?a[m]=[f.id]:a[m].push(f.id)}}catch(j){y=!0,h=j}finally{try{d||null==v.return||v.return()}finally{if(y)throw h}}var g=f.year;void 0===u[g]?u[g]=[f.id]:u[g].push(f.id)}}catch(j){i=!0,l=j}finally{try{o||null==p.return||p.return()}finally{if(i)throw l}}c(function(t){return t+e.length})});return function(){return r.unsubscribe()}},[e]),{recordCount:u,state:t}}(u),j=(g.recordCount,g.state.current),E=j.records,T=j.stemsToRecords,L=j.yearsToRecords,W=Object.keys(t),A=function(e){var t=l.a(x.a(O),p.a(v.a),f.a(function(e){return!d.a(e)&&d.a(y.a(w,e))}),p.a(function(e){return T[e]||[]}))(e);return t.length?t.reduce(S.a):[]},B=l.a($.a,s.a(function(e){var t=Object(i.a)(e,2),r=t[0],n=t[1];return p.a(function(e){return Object(o.a)({},e,{queryId:r})},function(e){return l.a(A,p.a(function(e){return E[e]}),f.a(function(t){return R.a(function(r){return function(e,t){return e.toLowerCase().includes(t.toLowerCase())}(t[r],e)},k)}))(e)}(n))}),C.a(M.a("year")))(t),F=p.a(function(e){var t=B[e]||[],r=l.a(p.a(function(r){var n=function(e){return L[e]?L[e].length:0}(e);return 0===n?[r,0]:[r,100*f.a(N.a("queryId",r),t).length/n]}),_.a)(W);return r.year=e,r},I.a(b,m+1));return a.a.createElement(Q.b,{width:1200,height:500,data:F},a.a.createElement(Q.c,null),a.a.createElement(Q.d,{dataKey:"year"}),a.a.createElement(Q.e,null),W.map(function(e){return a.a.createElement(Q.a,{key:e,type:"linear",dataKey:e,stroke:c[e],strokeWidth:3,dot:!1})}))},L=(r(405),r(406),r(434)),W=r(432),A=function(e){var t=e.tabIndex,r=e.setQuery,u=e.deleteQuery,c=e.query,o=e.color,i=Object(n.useMemo)(function(){return(new L.a).pipe(Object(W.a)(400))},[]);return Object(n.useEffect)(function(){var e=i.subscribe(r);return function(){return e.unsubscribe()}},[i]),a.a.createElement("div",{className:"query"},a.a.createElement("div",{className:"query__color-indicator",style:{backgroundColor:o}}),a.a.createElement("input",{className:"query__input",tabIndex:t,autoFocus:1===t,type:"text",onChange:function(e){return t=e.target.value,i.next(t);var t},placeholder:"Search",defaultValue:c}),a.a.createElement("button",{className:"query__delete button",onClick:u},"\xd7"))},B=(r(407),function(e){var t=e.onClick;return a.a.createElement("button",{className:"button",onClick:t},"+ Query")}),F=function(e){var t=e.colorMap,r=e.urlQuery,u=e.setQuery,c=e.addQuery,o=e.deleteQuery,s=Object.values(r).join("&"),f=Object.keys(r).length,d=Object(n.useMemo)(function(){return l.a($.a,p.a(function(e){var r=Object(i.a)(e,2),n=r[0],c=r[1];return a.a.createElement(A,{key:n,tabIndex:E(n)+1,color:t[n],query:c,setQuery:function(e){return u(n,e)},deleteQuery:function(){return o(n)}})}))(r)},[s,f]);return a.a.createElement("div",{className:"query-bar"},d,a.a.createElement(B,{onClick:c}))},K=r(185),P=r.n(K),J=r(187),D=r(186),H=r(431),U=r(122),V=function(e){return Object(U.fromFetch)("".concat("https://cors-holy-water.herokuapp.com/").concat(e))};function X(e,t){X=function(e,t){return new u(e,t)};var r=Object(g.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function u(e,t){var n=r.call(this,e);return a.set(n,t),n}function c(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(m.a)(u,r),u.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=c(t,this)),t},u.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var u=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(c(e,u)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},X.apply(this,arguments)}var z=P.a,G=function(e){switch(e){case"/":return"%2F";case"?":return"%3F";case"#":return"%23";case"=":return"%3D";case":":return"%3A";case";":return"%3B";case" ":return"%20";case"%":return"%25";case"+":return"%2B";default:return e}},Y=function(e){return e?"&resumptionToken=".concat(function(e){return e.split().map(G).join()}(e)):""},Z=function(e){return e.match(X(/^.*\/(.*)$/,{key:1})).groups.key},ee=function(e){for(var t={},r=0,n=Object.entries(e.metadata["oai_dc:dc"]);r<n.length;r++){var a=n[r],u=Object(i.a)(a,2),c=u[0],o=u[1];t[c.match(X(/^dc:(\w+)$/,{prop:1})).groups.prop]=o}return t.title=t.title?String(t.title):null,t.id=Z(t.identifier),delete t.identifier,t.year=t.date,delete t.date,t.type=Z(t.type),t.author=t.creator,delete t.creator,t},te=function e(t){return V("https://philpapers.org/oai.pl?verb=ListRecords&metadataPrefix=oai_dc".concat(Y(t))).pipe(J.a(function(e){return e.text()}),J.a(function(t){var r=z.parse(t)["OAI-PMH"].ListRecords,n=r.record,a=r.resumptionToken;return H.a([n],e(a))}))}().pipe(D.a(function(e){return e.map(ee).filter(function(e){return"en"===e.language&&e.title&&"number"===typeof e.year})})),re=(V("https://philPapers.org/philpapers/raw/categories.json?apiId=".concat("904518","&apiKey=").concat("5KLo4qkvXNl4t8s5")).pipe(J.a(function(e){return e.json()}),D.a(function(e){return e[0]})),r(441)),ne=r(442),ae=r(23),ue={q0:"blue",q1:"purple",q2:"green",q3:"grey",q4:"pink",q5:"yellow"},ce={q0:"good",q1:"governance"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(function(){var e=function(e){var t=Object(n.useState)(0),r=Object(i.a)(t,2),a=r[0],u=r[1],c=Object(n.useRef)(null);if(0===a){c.current=new URLSearchParams;for(var o=0,l=Object.entries(e);o<l.length;o++){var s=l[o],p=Object(i.a)(s,2),f=p[0],d=p[1];c.current.append(f,d)}}var y=c.current,h=function(){return u(function(e){return e+1})},b=function(){return window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(y))},v=_.a(Array.from(y.entries()));return{urlQuery:v,addQuery:function(){var e=re.a(ne.a,ae.a)(v),t=void 0!==e?"q".concat(E(e)+1):"q0";y.append(t,""),b(),h()},setQuery:function(e,t){y.set(e,t),b(),h()},deleteQuery:function(e){y.delete(e),b(),h()}}}(ce),t=e.urlQuery,r=e.addQuery,u=e.setQuery,c=e.deleteQuery;return a.a.createElement("div",{className:"App"},a.a.createElement(F,{urlQuery:t,setQuery:u,addQuery:r,deleteQuery:c,colorMap:ue}),a.a.createElement(T,{queries:t,colorMap:ue,recordSet$:te,yearRange:[2e3,2018]}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[221,1,2]]]);
//# sourceMappingURL=main.f4a5e688.chunk.js.map