(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,r){e.exports=r(430)},227:function(e,t,r){},228:function(e,t,r){},229:function(e,t,r){},410:function(e,t,r){},411:function(e,t,r){},412:function(e,t,r){},430:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(81),o=r.n(c),u=(r(227),r(228),r(229),r(31)),i=function(e){var t=e.queryIds,r=e.colorMap,n=e.data;return a.a.createElement("div",{className:"graph"},a.a.createElement(u.d,{width:"100%",height:"100%"},a.a.createElement(u.c,{data:n},a.a.createElement(u.e,null),a.a.createElement(u.f,{dataKey:"year",height:50},a.a.createElement(u.a,{angle:0,value:"year",position:"insideTop",offset:30,style:{textAnchor:"middle"}})),a.a.createElement(u.g,null,a.a.createElement(u.a,{angle:-90,value:"percentage (%)",position:"insideLeft",style:{textAnchor:"middle"}})),t.map(function(e){return a.a.createElement(u.b,{key:e,type:"linear",dataKey:e,stroke:r[e],strokeWidth:3,dot:!1})}))))},l=r(18),s=(r(410),r(411),r(441)),f=r(437),p=function(e){var t=e.tabIndex,r=e.setQuery,c=e.deleteQuery,o=e.query,u=e.color,i=Object(n.useMemo)(function(){return(new s.a).pipe(Object(f.a)(400))},[]);return Object(n.useEffect)(function(){var e=i.subscribe(r);return function(){return e.unsubscribe()}},[i]),a.a.createElement("div",{className:"query"},a.a.createElement("div",{className:"query__color-indicator",style:{backgroundColor:u}}),a.a.createElement("input",{className:"query__input",tabIndex:t,autoFocus:1===t,type:"text",onChange:function(e){return t=e.target.value,i.next(t);var t},placeholder:"Search",defaultValue:o}),a.a.createElement("button",{className:"query__delete button",onClick:c},"\xd7"))},d=(r(412),function(e){var t=e.onClick;return a.a.createElement("button",{className:"button button__new-query",onClick:t},"+ query")}),y=r(191),h=r(431),m=r(93),b=r(86),v=(r(177),r(82),r(92));function g(e,t){g=function(e,t){return new c(e,t)};var r=Object(v.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function c(e,t){var n=r.call(this,e);return a.set(n,t),n}function o(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(b.a)(c,r),c.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=o(t,this)),t},c.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var c=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,c)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},g.apply(this,arguments)}var j=/^([0-9]+|s|a|aa|at|an|the|of|on|and|to|in|for)$/,O=/[\-\[\]\s,.\u2013_'\u2019();:\/"\u201d]/,w=["title","description"],E=function(e){return Number(e.match(g(/^q(\d+)$/,{index:1})).groups.index)},k=function(e){var t=e.colorMap,r=e.urlQuery,c=e.setQuery,o=e.addQuery,u=e.deleteQuery,i=Object.values(r).join("&"),s=Object.keys(r).length,f=Object(n.useMemo)(function(){return y.a(h.a,m.a(function(e){var r=Object(l.a)(e,2),n=r[0],o=r[1];return a.a.createElement(p,{key:n,tabIndex:E(n)+1,color:t[n],query:o,setQuery:function(e){return c(n,e)},deleteQuery:function(){return u(n)}})}))(r)},[i,s]);return a.a.createElement("div",{className:"query-bar"},f,a.a.createElement(d,{onClick:o}))},q=r(187),x=r.n(q),Q=r(189),S=r(188),R=r(436),N=r(123),$=function(e){return Object(N.fromFetch)("".concat("https://cors-holy-water.herokuapp.com/").concat(e))};function _(e,t){_=function(e,t){return new c(e,t)};var r=Object(v.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function c(e,t){var n=r.call(this,e);return a.set(n,t),n}function o(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(b.a)(c,r),c.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=o(t,this)),t},c.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var c=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,c)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},_.apply(this,arguments)}var C=x.a,I=function(e){switch(e){case"/":return"%2F";case"?":return"%3F";case"#":return"%23";case"=":return"%3D";case":":return"%3A";case";":return"%3B";case" ":return"%20";case"%":return"%25";case"+":return"%2B";default:return e}},M=function(e){return e?"&resumptionToken=".concat(function(e){return e.split().map(I).join()}(e)):""},T=function(e){return e.match(_(/^.*\/(.*)$/,{key:1})).groups.key},L=function(e){for(var t={},r=0,n=Object.entries(e.metadata["oai_dc:dc"]);r<n.length;r++){var a=n[r],c=Object(l.a)(a,2),o=c[0],u=c[1];t[o.match(_(/^dc:(\w+)$/,{prop:1})).groups.prop]=u}return t.title=t.title?String(t.title):null,t.id=T(t.identifier),delete t.identifier,t.year=t.date,delete t.date,t.type=T(t.type),t.author=t.creator,delete t.creator,t},A=function e(t){return $("https://philpapers.org/oai.pl?verb=ListRecords&metadataPrefix=oai_dc".concat(M(t))).pipe(Q.a(function(e){return e.text()}),Q.a(function(t){var r=C.parse(t)["OAI-PMH"].ListRecords,n=r.record,a=r.resumptionToken;return R.a([n],e(a))}))}().pipe(S.a(function(e){return e.map(L).filter(function(e){return"en"===e.language&&e.title&&"number"===typeof e.year})})),W=($("https://philPapers.org/philpapers/raw/categories.json?apiId=".concat("904518","&apiKey=").concat("5KLo4qkvXNl4t8s5")).pipe(Q.a(function(e){return e.json()}),S.a(function(e){return e[0]})),r(447)),B=r(446),F=r(23),K=r(432),P=r(193),J=r(438),D=r(192),H=r(443),U=r(433),V=r(190),X=r(89),z=r.n(X),G=function(e){return y.a(J.a(function(t){return e[t]?e[t].split(O):[]}),m.a(z.a),D.a(function(e){return!H.a(e)&&H.a(U.a(j,e))}),V.a)(w)},Y=r(435),Z=r(442),ee=r(439),te=r(440),re=r(444),ne=r(434),ae=r(445),ce=function(e){var t=e.recordSet$,r=e.yearRange,a=e.queries,c=Object(l.a)(r,2),o=c[0],u=c[1],i=function(e){var t=Object(n.useRef)({records:{},stemsToRecords:{},yearsToRecords:{}}),r=Object(n.useState)(0),a=Object(l.a)(r,2),c=a[0],o=a[1];return Object(n.useEffect)(function(){var r=e.subscribe(function(e){var r=t.current,n=r.records,a=r.stemsToRecords,c=r.yearsToRecords,u=!0,i=!1,l=void 0;try{for(var s,f=e[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var p=s.value;n[p.id]=p;var d=!0,y=!1,h=void 0;try{for(var m,b=G(p)[Symbol.iterator]();!(d=(m=b.next()).done);d=!0){var v=m.value;void 0===a[v]?a[v]=[p.id]:a[v].push(p.id)}}catch(j){y=!0,h=j}finally{try{d||null==b.return||b.return()}finally{if(y)throw h}}var g=p.year;void 0===c[g]?c[g]=[p.id]:c[g].push(p.id)}}catch(j){i=!0,l=j}finally{try{u||null==f.return||f.return()}finally{if(i)throw l}}o(function(t){return t+e.length})});return function(){return r.unsubscribe()}},[e]),{recordCount:c,state:t}}(t),s=(i.recordCount,i.state.current),f=s.records,p=s.stemsToRecords,d=s.yearsToRecords,b=Object.keys(a),v=function(e){var t=y.a(Y.a(O),m.a(z.a),D.a(function(e){return!H.a(e)&&H.a(U.a(j,e))}),m.a(function(e){return p[e]||[]}))(e);return t.length?t.reduce(Z.a):[]},g=y.a(h.a,J.a(function(e){var t=Object(l.a)(e,2),r=t[0],n=t[1];return m.a(function(e){return Object(P.a)({},e,{queryId:r})},function(e){return y.a(v,m.a(function(e){return f[e]}),D.a(function(t){return ee.a(function(r){return function(e,t){return e.toLowerCase().includes(t.toLowerCase())}(t[r],e)},w)}))(e)}(n))}),te.a(re.a("year")))(a);return m.a(function(e){var t=g[e]||[],r=y.a(m.a(function(r){var n=function(e){return d[e]?d[e].length:0}(e);return 0===n?[r,0]:[r,100*D.a(ne.a("queryId",r),t).length/n]}),K.a)(b);return r.year=e,r},ae.a(o,u+1))},oe={q0:"blue",q1:"purple",q2:"green",q3:"grey",q4:"pink",q5:"yellow"},ue={q0:"good",q1:"governance"};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(function(){var e=function(e){var t=Object(n.useState)(0),r=Object(l.a)(t,2),a=r[0],c=r[1],o=Object(n.useRef)(null);if(0===a){o.current=new URLSearchParams;for(var u=0,i=Object.entries(e);u<i.length;u++){var s=i[u],f=Object(l.a)(s,2),p=f[0],d=f[1];o.current.append(p,d)}}var y=o.current,h=function(){return c(function(e){return e+1})},m=function(){return window.history.replaceState({},"","".concat(window.location.pathname,"?").concat(y))},b=K.a(Array.from(y.entries()));return{urlQuery:b,addQuery:function(){var e=W.a(B.a,F.a)(b),t=void 0!==e?"q".concat(E(e)+1):"q0";y.append(t,""),m(),h()},setQuery:function(e,t){y.set(e,t),m(),h()},deleteQuery:function(e){y.delete(e),m(),h()}}}(ue),t=e.urlQuery,r=e.addQuery,c=e.setQuery,o=e.deleteQuery,u=ce({recordSet$:A,yearRange:[2010,2019],queries:t});Object.keys(t);return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"header"},a.a.createElement(k,{urlQuery:t,setQuery:c,addQuery:r,deleteQuery:o,colorMap:oe})),a.a.createElement("footer",{className:"footer"},a.a.createElement(i,{queryIds:Object.keys(t),colorMap:oe,data:u})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,1,2]]]);
//# sourceMappingURL=main.83c2ccdc.chunk.js.map