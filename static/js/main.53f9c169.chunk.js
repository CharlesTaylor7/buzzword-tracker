(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{212:function(e,t,r){e.exports=r(403)},217:function(e,t,r){},218:function(e,t,r){},403:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(76),o=r.n(c),u=(r(217),r(21)),i=(r(218),r(51)),s=r(120),l=r(77),p=r(413),f=r(414),d=r(89),y=r(416),h=r(417),m=r(408),v=r(411),b=r(78),g=r.n(b),j=r(55),O=r(415),w=r(418),x=r(409),E=function(e){var t=e.query,r=e.yearRange,c=e.record$,o=Object(u.a)(r,2),b=o[0],E=o[1],R=function(e){var t=Object(n.useState)({records:{},stemsToRecords:{},yearsToRecords:{}}),r=Object(u.a)(t,2),a=r[0],c=r[1];return Object(n.useEffect)(function(){e.subscribe(function(e){var t=/^([0-9]+|s|the|of|on|and|to|in|at|for)$/,r=/[\s,.\-_'\u2019]/,n=p.a(f.a(function(t){return e[t]?e[t].split(r):[]}),d.a(g.a),y.a(function(e){return!h.a(e)&&h.a(m.a(t,e))}),v.a)(["title","description"]);c(function(t){var r=t.stemsToRecords,a=t.yearsToRecords,c=t.records,o=Object(i.a)({},c,Object(l.a)({},e.id,e)),u=Object(i.a)({},r),p=!0,f=!1,d=void 0;try{for(var y,h=n[Symbol.iterator]();!(p=(y=h.next()).done);p=!0){var m=y.value;void 0===u[m]?u[m]=[e.id]:u[m]=[].concat(Object(s.a)(u[m]),[e.id])}}catch(g){f=!0,d=g}finally{try{p||null==h.return||h.return()}finally{if(f)throw d}}var v=Object(i.a)({},a),b=e.year;return void 0===v[b]?v[b]=[e.id]:v[b]=[].concat(Object(s.a)(v[b]),[e.id]),{records:o,stemsToRecords:u,yearsToRecords:v}})})},[]),a}(c),T=R.records,S=R.stemsToRecords,$=R.yearsToRecords,A=Object.keys(T).length;console.log(A);var B=S[g()(t)],K=B?p.a(d.a(function(e){return T[e]}),O.a(w.a("year")),x.a,y.a(function(e){var t=Object(u.a)(e,2),r=t[0];t[1];return r>=b&&r<=E}),d.a(function(e){var t=Object(u.a)(e,2),r=t[0];return{year:r,percentage:100*t[1].length/$[r].length}}),d.a(function(e){return Object(i.a)({},e,{amt:e.percentage})}))(B):[];return a.a.createElement(j.b,{width:1200,height:500,data:K},a.a.createElement(j.c,null),a.a.createElement(j.d,{dataKey:"year"}),a.a.createElement(j.e,null),a.a.createElement(j.a,{type:"linear",dataKey:"percentage",stroke:"#8484d8",label:a.a.createElement(k,null)}))},k=function(e){var t=e.x,r=e.y,n=e.stroke,c=e.value;return a.a.createElement("text",{x:t,y:r,dy:-4,fill:n,fontSize:10,textAnchor:"middle"},c)},R=r(177),T=(r(404),r(115),r(183)),S=r(178),$=r.n(S),A=r(182),B=r(180),K=r(410),q=r(181),I=r(412),L=r(119),N=r.n(L),P=r(179),W="https://cors-holy-water.herokuapp.com/",_=function(){var e=Object(P.a)(N.a.mark(function e(t){var r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(W).concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:e.prev=7,e.t0=e.catch(0),W="",console.log("Cors proxy failed.");case 11:return e.abrupt("return",fetch("".concat(W).concat(t)));case 12:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}();function C(e,t){C=function(e,t){return new c(e,t)};var r=Object(T.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function c(e,t){var n=r.call(this,e);return a.set(n,t),n}function o(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(R.a)(c,r),c.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=o(t,this)),t},c.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var c=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,c)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},C.apply(this,arguments)}var F=$.a,J=function(e){switch(e){case"/":return"%2F";case"?":return"%3F";case"#":return"%23";case"=":return"%3D";case":":return"%3A";case";":return"%3B";case" ":return"%20";case"%":return"%25";case"+":return"%2B";default:return e}},M=function(e){return e?"&resumptionToken=".concat(function(e){return e.split().map(J).join()}(e)):""},z=function(e){return e.match(C(/^.*\/(.*)$/,{key:1})).groups.key},D=function e(t){return q.a(_("https://philpapers.org/oai.pl?verb=ListRecords&metadataPrefix=oai_dc".concat(M(t)))).pipe(A.a(function(e){return e.text()}),A.a(function(t){var r=F.parse(t)["OAI-PMH"].ListRecords,n=r.record,a=r.resumptionToken;return I.a(q.a(n),e(a))}))}().pipe(B.a(function(e){for(var t={},r=0,n=Object.entries(e.metadata["oai_dc:dc"]);r<n.length;r++){var a=n[r],c=Object(u.a)(a,2),o=c[0],i=c[1];t[o.match(C(/^dc:(\w+)$/,{prop:1})).groups.prop]=i}return t.title=t.title?String(t.title):null,t.id=z(t.identifier),delete t.identifier,t.year=t.date,delete t.date,t.type=z(t.type),t.author=t.creator,delete t.creator,t}),K.a(function(e){return"en"===e.language&&e.title&&"number"===typeof e.year}));q.a(_("https://philPapers.org/philpapers/raw/categories.json?apiId=".concat("904518","&apiKey=").concat("5KLo4qkvXNl4t8s5"))).pipe(A.a(function(e){return e.json()}),B.a(function(e){return e[0]})),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],c=t[1];return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("label",null,"Trend for:",a.a.createElement("input",{type:"text",value:r,onChange:function(e){return c(e.target.value)},style:{margin:"10px"}})),a.a.createElement(E,{query:r,record$:D,yearRange:[2e3,2018]})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[212,1,2]]]);
//# sourceMappingURL=main.53f9c169.chunk.js.map