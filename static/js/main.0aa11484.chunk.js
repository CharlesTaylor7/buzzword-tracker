(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{223:function(e,t,r){e.exports=r(427)},228:function(e,t,r){},229:function(e,t,r){},407:function(e,t,r){},408:function(e,t,r){},409:function(e,t,r){},427:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),o=r(79),u=r.n(o),c=(r(228),r(229),r(81)),i=r(18),l=r(436),s=r(435),p=r(94),f=r(192),y=r(441),d=r(428),h=r(191),v=r(83),b=r.n(v),m=/^([0-9]+|s|a|aa|at|an|the|of|on|and|to|in|for)$/,g=/[\-\[\]\s,.\u2013_'\u2019();:\/"\u201d]/,j=["title","description"],O=function(e){return l.a(s.a(function(t){return e[t]?e[t].split(g):[]}),p.a(b.a),f.a(function(e){return!y.a(e)&&y.a(d.a(m,e))}),h.a)(j)},w=r(59),k=r(432),E=r(443),x=r(439),Q=r(429),S=r(438),q=r(440),R=r(430),$=r(431),C=r(442),M=function(e){var t=e.queries,r=e.yearRange,o=e.recordSet$,u=e.colorMap,h=Object(i.a)(r,2),v=h[0],M=h[1],T=function(e){var t=Object(n.useRef)({records:{},stemsToRecords:{},yearsToRecords:{}}),r=Object(n.useState)(0),a=Object(i.a)(r,2),o=a[0],u=a[1];return Object(n.useEffect)(function(){var r=e.subscribe(function(e){var r=t.current,n=r.records,a=r.stemsToRecords,o=r.yearsToRecords,c=!0,i=!1,l=void 0;try{for(var s,p=e[Symbol.iterator]();!(c=(s=p.next()).done);c=!0){var f=s.value;n[f.id]=f;var y=!0,d=!1,h=void 0;try{for(var v,b=O(f)[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var m=v.value;void 0===a[m]?a[m]=[f.id]:a[m].push(f.id)}}catch(j){d=!0,h=j}finally{try{y||null==b.return||b.return()}finally{if(d)throw h}}var g=f.year;void 0===o[g]?o[g]=[f.id]:o[g].push(f.id)}}catch(j){i=!0,l=j}finally{try{c||null==p.return||p.return()}finally{if(i)throw l}}u(function(t){return t+e.length})});return function(){return r.unsubscribe()}},[e]),{recordCount:o,state:t}}(o),N=(T.recordCount,T.state.current),I=N.records,P=N.stemsToRecords,L=N.yearsToRecords,W=Object.keys(t),B=function(e){var t=l.a(k.a(g),p.a(b.a),f.a(function(e){return!y.a(e)&&y.a(d.a(m,e))}),p.a(function(e){return P[e]||[]}))(e);return t.length?t.reduce(E.a):[]},F=l.a(Q.a,s.a(function(e){var t=Object(i.a)(e,2),r=t[0],n=t[1];return p.a(function(e){return Object(c.a)({},e,{queryId:r})},function(e){return l.a(B,p.a(function(e){return I[e]}),f.a(function(t){return x.a(function(r){return function(e,t){return e.toLowerCase().includes(t.toLowerCase())}(t[r],e)},j)}))(e)}(n))}),S.a(q.a("year")))(t),K=p.a(function(e){var t=F[e]||[],r=l.a(p.a(function(r){var n=function(e){return L[e]?L[e].length:0}(e);return 0===n?[r,0]:[r,100*f.a(R.a("queryId",r),t).length/n]}),$.a)(W);return r.year=e,r},C.a(v,M+1));return a.a.createElement(w.b,{width:1200,height:500,data:K},a.a.createElement(w.c,null),a.a.createElement(w.d,{dataKey:"year"}),a.a.createElement(w.e,null),W.map(function(e){return a.a.createElement(w.a,{key:e,type:"linear",dataKey:e,stroke:u[e],strokeWidth:3,dot:!1})}))},T=(r(407),r(90)),N=(r(178),r(80),r(93)),I=(r(408),r(437)),P=r(434);function L(e,t){L=function(e,t){return new o(e,t)};var r=Object(N.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function o(e,t){var n=r.call(this,e);return a.set(n,t),n}function u(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(T.a)(o,r),o.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=u(t,this)),t},o.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var o=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,o)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},L.apply(this,arguments)}var W=function(e){var t=e.id,r=e.setQuery,o=e.query,u=e.color,c=Object(n.useMemo)(function(){return(new I.a).pipe(Object(P.a)(400))},[]);Object(n.useEffect)(function(){c.subscribe(function(e){return r(t,e)})},[c,r,t]);var i=Number(t.match(L(/^q(\d+)$/,{index:1})).groups.index)+1,l=1===i;return a.a.createElement("div",{className:"query"},a.a.createElement("div",{className:"color-indicator",style:{backgroundColor:u}}),a.a.createElement("input",{tabIndex:i,autoFocus:l,type:"text",onChange:function(e){return t=e.target.value,c.next(t);var t},placeholder:"Search",defaultValue:o,style:{margin:"10px",border:0,outline:0,font:"inherit",color:"white",background:"transparent"}}))},B=(r(409),function(e){var t=e.onClick;return a.a.createElement("button",{onClick:t},"+ Query")}),F=function(e){var t=e.colorMap,r=e.urlQuery,o=e.setQuery,u=e.addQuery,c=(e.deleteQuery,Object(n.useMemo)(function(){return l.a(Q.a,p.a(function(e){var r=Object(i.a)(e,2),n=r[0],u=r[1];return a.a.createElement(W,{key:n,id:n,color:t[n],query:u,setQuery:o})}))(r)},[Object.values(r)]));return a.a.createElement("div",{className:"query-bar"},c,a.a.createElement(B,{onClick:u}))},K=r(187),A=r.n(K),_=r(190),J=r(188),D=r(433),H=r(123),U=function(e){return Object(H.fromFetch)("".concat("https://cors-holy-water.herokuapp.com/").concat(e))};function V(e,t){V=function(e,t){return new o(e,t)};var r=Object(N.a)(RegExp),n=RegExp.prototype,a=new WeakMap;function o(e,t){var n=r.call(this,e);return a.set(n,t),n}function u(e,t){var r=a.get(t);return Object.keys(r).reduce(function(t,n){return t[n]=e[r[n]],t},Object.create(null))}return Object(T.a)(o,r),o.prototype.exec=function(e){var t=n.exec.call(this,e);return t&&(t.groups=u(t,this)),t},o.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var r=a.get(this);return n[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}if("function"===typeof t){var o=this;return n[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,o)),t.apply(this,e)})}return n[Symbol.replace].call(this,e,t)},V.apply(this,arguments)}var X=A.a,z=function(e){switch(e){case"/":return"%2F";case"?":return"%3F";case"#":return"%23";case"=":return"%3D";case":":return"%3A";case";":return"%3B";case" ":return"%20";case"%":return"%25";case"+":return"%2B";default:return e}},G=function(e){return e?"&resumptionToken=".concat(function(e){return e.split().map(z).join()}(e)):""},Y=function(e){return e.match(V(/^.*\/(.*)$/,{key:1})).groups.key},Z=function(e){for(var t={},r=0,n=Object.entries(e.metadata["oai_dc:dc"]);r<n.length;r++){var a=n[r],o=Object(i.a)(a,2),u=o[0],c=o[1];t[u.match(V(/^dc:(\w+)$/,{prop:1})).groups.prop]=c}return t.title=t.title?String(t.title):null,t.id=Y(t.identifier),delete t.identifier,t.year=t.date,delete t.date,t.type=Y(t.type),t.author=t.creator,delete t.creator,t},ee=function e(t){return U("https://philpapers.org/oai.pl?verb=ListRecords&metadataPrefix=oai_dc".concat(G(t))).pipe(_.a(function(e){return e.text()}),_.a(function(t){var r=X.parse(t)["OAI-PMH"].ListRecords,n=r.record,a=r.resumptionToken;return D.a([n],e(a))}))}().pipe(J.a(function(e){return e.map(Z).filter(function(e){return"en"===e.language&&e.title&&"number"===typeof e.year})})),te=(U("https://philPapers.org/philpapers/raw/categories.json?apiId=".concat("904518","&apiKey=").concat("5KLo4qkvXNl4t8s5")).pipe(_.a(function(e){return e.json()}),J.a(function(e){return e[0]})),r(193)),re=r(82),ne=r(189);function ae(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var oe={q0:"blue",q1:"purple",q2:"green",q3:"grey",q4:"pink",q5:"yellow"},ue={};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(function(){var e=function(e){var t=Object(ne.useUrlSearchParams)(e),r=Object(i.a)(t,2),n=r[0],a=r[1],o=function(e,t){return a(Object(c.a)({},n,Object(re.a)({},e,t)))};return{urlQuery:n,addQuery:function(){return o("q".concat(Object.keys(n).length),"")},setQuery:o,deleteQuery:function(e){n[e];var t=Object(te.a)(n,[e].map(ae));a(t)}}}(ue),t=e.urlQuery,r=e.addQuery,n=e.setQuery,o=e.deleteQuery;return a.a.createElement("div",{className:"App"},a.a.createElement(F,{urlQuery:t,setQuery:n,addQuery:r,deleteQuery:o,colorMap:oe}),a.a.createElement(M,{queries:t,colorMap:oe,recordSet$:ee,yearRange:[2e3,2018]}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[223,1,2]]]);
//# sourceMappingURL=main.0aa11484.chunk.js.map